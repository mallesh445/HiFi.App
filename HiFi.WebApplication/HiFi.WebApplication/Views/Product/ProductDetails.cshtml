@model HiFi.Data.ViewModels.ProductViewModel

@{
    ViewData["Title"] = "ProductDetails";
    //Layout = "_MainLayout";
}

<div>
    <div class="container">
        <div class="row">
            @*@Html.Partial("~/Views/SideBar/_SideBarMenu.cshtml")*@
            @*<div class="col-lg-3"></div>*@
            @*<div class="col-lg-9">*@
            <div class="span12">
                <h4>Product Details @Model.ProductName</h4>
                <ul class="breadcrumb">
                    <li><a href="\">Home</a> <span class="divider">/</span></li>
                    <li>
                        <a asp-controller="Product" asp-action="GetAllProductsBySubCategory" asp-route-id="@Model.SubCategoryOneId">
                            Products
                        </a> <span class="divider">/</span>
                    </li>
                    <li class="active">Product Details</li>
                </ul>
                <div class="row">
                    <div id="gallery" class="span3">
                        @if (Model.ProductImage != null && Model.ProductImage.Count > 0 && Model.ProductImage[0].FKProductId == Model.PKProductId)
                        {
                            <a href="@Model.ProductImage[0]?.ImagePath" title="@Model.ProductName">
                                <img src="@Model.ProductImage[0]?.ImagePath" style="height:420px!important;width:270px!important;"
                                     alt="@Model.ProductImage[0].ImageName" class="imageExample" />
                            </a>

                            <div id="differentview" class="moreOptopm carousel slide">
                                <div class="carousel-inner">
                                    <div class="item active">
                                        @foreach (var smImage in Model.ProductImage)
                                        {
                                            <a href="@smImage.ImagePath" title="@smImage.ImageName">
                                                <img style="width:29%;height:35%" src="@smImage.ImagePath" alt="@smImage.ImageName" />
                                            </a>
                                        }
                                        @*<a href="~/themes/images/products/large/f1.jpg"> <img style="width:29%" src="~/themes/images/products/large/f1.jpg" alt="" /></a>
                                            <a href="~/themes/images/products/large/f2.jpg"> <img style="width:29%" src="~/themes/images/products/large/f2.jpg" alt="" /></a>
                                            <a href="~/themes/images/products/large/f3.jpg"> <img style="width:29%" src="~/themes/images/products/large/f3.jpg" alt="" /></a>*@
                                    </div>
                                </div>
                            </div>
                        }
                        else
                        {
                            <a href="#">
                                <img src="~/Images/default-product.png" />
                            </a>
                            <div id="differentview" class="moreOptopm carousel slide">
                                <div class="carousel-inner">
                                    <div class="item active">
                                        <a href="~/themes/images/products/large/f1.jpg"> <img style="width:29%" src="~/themes/images/products/large/f1.jpg" alt="" /></a>
                                        <a href="~/themes/images/products/large/f2.jpg"> <img style="width:29%" src="~/themes/images/products/large/f2.jpg" alt="" /></a>
                                        <a href="~/themes/images/products/large/f3.jpg"> <img style="width:29%" src="~/themes/images/products/large/f3.jpg" alt="" /></a>
                                    </div>
                                </div>
                            </div>
                        }

                        @*<div id="differentview" class="moreOptopm carousel slide">
                                <div class="carousel-inner">
                                    <div class="item active">
                                        <a href="~/themes/images/products/large/f1.jpg"> <img style="width:29%" src="~/themes/images/products/large/f1.jpg" alt="" /></a>
                                        <a href="~/themes/images/products/large/f2.jpg"> <img style="width:29%" src="~/themes/images/products/large/f2.jpg" alt="" /></a>
                                        <a href="~/themes/images/products/large/f3.jpg"> <img style="width:29%" src="~/themes/images/products/large/f3.jpg" alt="" /></a>
                                    </div>
                                    <div class="item">
                                        <a href="~/themes/images/products/large/f3.jpg"> <img style="width:29%" src="~/themes/images/products/large/f3.jpg" alt="" /></a>
                                        <a href="~/themes/images/products/large/f1.jpg"> <img style="width:29%" src="~/themes/images/products/large/f1.jpg" alt="" /></a>
                                        <a href="~/themes/images/products/large/f2.jpg"> <img style="width:29%" src="~/themes/images/products/large/f2.jpg" alt="" /></a>
                                    </div>
                                </div>
                                <a class="left carousel-control" href="#myCarousel" data-slide="prev">‹</a>
                                <a class="right carousel-control" href="#myCarousel" data-slide="next">›</a>
                            </div>*@

                    </div>
                    <div class="span8">
                        <h3>@Model.ProductName</h3>
                        <small>- @Model.ShortDescription</small>
                        <hr class="soft" />
                        <div class="control-group">
                            <label class="control-label"><span>@Model.Price</span></label>
                            <div class="controls">
                                <input type="number" id="productQty" class="span1" placeholder="Qty." />
                                <button type="submit" id="btnAddtoCartAjax" class="btn btn-large btn-primary pull-right" data-toggle="modal" data-target="#myModal">
                                    Add to cart <i class="fa fa-shopping-cart"></i>
                                </button>
                                <input type="hidden" id="itemId" value="@Model.PKProductId" />
                            </div>
                        </div>

                        <hr class="soft" />
                        <h4>@Model.Quantity items in stock</h4>

                        <hr class="soft clr" />
                        <p>
                            @Model.Description
                        </p>
                        <a class="btn btn-small btn-primary pull-right" href="#detail">More Details</a>
                        <br class="clr" />
                        <a href="#" name="detail"></a>
                        <hr class="soft" />
                    </div>

                    <div class="span12">
                        <ul id="productDetail" class="nav nav-tabs">
                            <li class="active"><a href="#home" data-toggle="tab">Product Details</a></li>
                            <li><a href="#profile" data-toggle="tab">Related Products</a></li>
                        </ul>
                        <div id="myTabContent" class="tab-content">
                            <div class="tab-pane fade active in" id="home">
                                <h4>Product Information</h4>
                                <table class="table table-bordered">
                                    <tbody>
                                        <tr class="techSpecRow"><th colspan="2">Product Details</th></tr>
                                        <tr class="techSpecRow"><td class="techSpecTD1">Manufacturer: </td><td class="techSpecTD2">Manufacturer Name</td></tr>
                                        <tr class="techSpecRow"><td class="techSpecTD1">Serial Number: </td><td class="techSpecTD2">@Model.SerialNumber</td></tr>
                                        <tr class="techSpecRow"><td class="techSpecTD1">Model Number:</td><td class="techSpecTD2">@Model.ModelNumber</td></tr>
                                        <tr class="techSpecRow"><td class="techSpecTD1">Released on:</td><td class="techSpecTD2"> @Model.UpdatedDate.Date.ToString("dddd, dd MMMM yyyy")</td></tr>
                                        <tr class="techSpecRow"><td class="techSpecTD1">Dimensions:</td><td class="techSpecTD2"> 5.50" h x 5.50" w x 2.00" l, .75 pounds</td></tr>
                                        <tr class="techSpecRow"><td class="techSpecTD1">Display size:</td><td class="techSpecTD2">3</td></tr>
                                    </tbody>
                                </table>

                                <h5>Features</h5>
                                <p>
                                    @Model.Description
                                </p>
                                <p>@Model.ShortDescription</p>
                                <p>
                                    Quantity : @Model.Quantity Available
                                </p>
                                <h4>About Manufacturer</h4>
                                <h5>Company </h5>
                                <p>
                                    @Model.ManufacturerName
                                </p>

                                <h5>Description</h5>
                                <p>
                                    @Model.ManufacturerDescription
                                </p>
                                @*<h5>Impressive panoramas</h5>
                                    <p>
                                        With its easy to use Panoramic shooting mode you can get creative on the S2950, however basic your skills, and rest assured that you will not risk shooting uneven landscapes or shaky horizons. The camera enables you to take three successive shots with a helpful tool which automatically releases the shutter once the images are fully aligned to seamlessly stitch the shots together in-camera. It's so easy and the results are impressive.
                                    </p>

                                    <h5>Sharp, clear shots</h5>
                                    <p>
                                        Even at the longest zoom settings or in the most challenging of lighting conditions, the S2950 is able to produce crisp, clean results. With its mechanically stabilised 1/2 3", 14 megapixel CCD sensor, and high ISO sensitivity settings, Fujifilm's Dual Image Stabilisation technology combines to reduce the blurring effects of both hand-shake and subject movement to provide superb pictures.
                                    </p>*@
                            </div>
                            <div class="tab-pane fade" id="profile">
                                <div id="myTab" class="pull-right">
                                    <a href="#listView" data-toggle="tab">
                                        <span class="btn btn-large">
                                            <i class="fa fa-th-list"></i>
                                        </span>
                                    </a>
                                    <a href="#blockView" data-toggle="tab"><span class="btn btn-large btn-primary"><i class="fa fa-th-large"></i></span></a>
                                </div>
                                <br class="clr" />
                                <hr class="soft" />
                                <div class="tab-content">
                                    <div class="tab-pane" id="listView">
                                        @foreach (var relatedProduct in Model.RelatedProducts)
                                        {
                                            <div class="row">
                                                <div class="span2 cover">
                                                    @if (!string.IsNullOrEmpty(@relatedProduct.ImagePath))
                                                    {
                                                        <img src="@relatedProduct.ImagePath" style="height:160px!important;width:160px!important;" alt="@relatedProduct.ImageName" />
                                                    }
                                                    else
                                                    {
                                                        <img src="~/themes/images/products/4.jpg" alt="" />
                                                    }
                                                </div>
                                                <div class="span4">
                                                    <h3>New | Available</h3>
                                                    <hr class="soft" />
                                                    <h5>@relatedProduct.ProductName</h5>
                                                    <p>
                                                        @relatedProduct.Description
                                                    </p>
                                                    <a class="btn btn-primary btn-small pull-left" href="ProductDetails?productId=@relatedProduct.ProductId">View Details</a>
                                                    <br class="clr" />
                                                </div>
                                                <div class="span3 alignR">
                                                    <form class="form-horizontal qtyFrm">
                                                        <h3>&#8377; @relatedProduct.Price</h3>
                                                        <label class="checkbox">
                                                            <input type="checkbox">  Adds product to compair
                                                        </label><br />
                                                        <div class="btn-group">
                                                            <a href="ShoppingCart/AddToShoppingCart?productId=@relatedProduct.ProductId" class="btn btn-large btn-primary">
                                                                Add to <i class="fa fa-shopping-cart"></i>
                                                            </a>
                                                            <a href="ProductDetails?productId=@relatedProduct.ProductId" class="btn btn-large">
                                                                <i class="fa fa-search"></i>
                                                            </a>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                            <hr class="soft" />
                                        }
                                    </div>
                                    <div class="tab-pane active" id="blockView">
                                        <ul class="thumbnails">
                                            @foreach (var item in Model.RelatedProducts)
                                            {
                                                <li class="span3">
                                                    <div class="thumbnail">
                                                        <a class="cover" href="ProductDetails?productId=@item.ProductId">
                                                            <img src="@item.ImagePath" style="height:160px!important;width:160px!important;" alt="@item.ImageName" />
                                                        </a>
                                                        <div class="caption">
                                                            <h5>@item.ProductName</h5>
                                                            @if (item.Description.Length > 70)
                                                            {

                                                                <p> @item.Description.Substring(0, 70)</p>
                                                            }
                                                            else
                                                            {
                                                                <p> @item.Description</p>
                                                            }

                                                            <h4 style="text-align:center">
                                                                <a class="btn" href="ProductDetails?productId=@item.ProductId"> <i class="fa fa-search"></i></a>
                                                                <a class="btn" href="ShoppingCart/AddToShoppingCart?productId=@item.ProductId">
                                                                    Add to
                                                                    <i class="icon-shopping-cart"></i>
                                                                </a><a class="btn btn-primary" href="#">&#8377;@item.Price</a>
                                                            </h4>
                                                        </div>
                                                    </div>
                                                </li>
                                            }
                                        </ul>
                                        <hr class="soft" />
                                    </div>
                                </div>
                                <br class="clr">
                            </div>
                        </div>
                    </div>

                </div>
                <!-- Trigger the modal with a button -->
                <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal"
                        id="btnTriggerModal" style="display:none;">
                    TriggerModal
                </button>

                <!-- Modal -->
                <div id="myModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Quantity Alert</h4>
                            </div>
                            <div class="modal-body">
                                <p>Quantity should not be 0 or empty.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $("#btnAddtoCartAjax").click(function () {
                 var productId = $('#itemId').val();
                var productQty = $('#productQty').val();
                var data1 = JSON.stringify({
                    'productId': $("#itemId").val(),
                    'productQty': $("#productQty").val()
                });
                if (Boolean(productQty)) {
                    $.ajax({
                        type: 'POST',
                        async: false, //blocks window close
                        url: '/ShoppingCart/AddToShoppingCart?productId=' + productId + '&productQty=' + productQty,
                        // url: '@Url.Action("AddToShoppingCart", "ShoppingCart")',
                        data: { productId: $('#itemId').val(), productQty: $('#productQty').val() },
                        contentType: 'application/json; charset=utf-8',
                        success: function (data) {
                            window.location.href = "ProductDetails?productId="+productId;
                            //alert('Successfully product added to cart.');
                        },
                        error: function () {
                            alert("error");
                        }
                    });
                }
                else {
                    document.getElementById("#btnTriggerModal").click();
                    }
            });
            setSession = function(){
                document.getElementById("CartCount").value = "56";
            }

            $(".imageExample").imagezoomsl();

        });

    </script>
}
